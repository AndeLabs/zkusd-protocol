# =============================================================================
# zkUSD Transfer Spell (Operational Template)
# =============================================================================
# Transfer zkUSD tokens between addresses
#
# DEPLOYMENT VALUES:
#   Token VK:      7d1a06745a94adf1195fb9f2f987cb48b8c46b814f53167c619c9175cd406903
#   Token App ID:  a6b3570c84064d72dc6687d0309154469efa6a427fd3c1691e656d6172455c82
#
# UTXO MODEL: No approval needed - ownership is direct
#   - Consume input UTXO with zkUSD
#   - Create output UTXOs: recipient + change
# =============================================================================

version: 8

apps:
  # zkUSD Token (fungible): t/{app_id}/{vk}
  $TOKEN: t/a6b3570c84064d72dc6687d0309154469efa6a427fd3c1691e656d6172455c82/7d1a06745a94adf1195fb9f2f987cb48b8c46b814f53167c619c9175cd406903

# Witness data for Transfer operation
private_inputs:
  $TOKEN:
    op: 1                                     # TRANSFER
    from: ${SENDER_PUBKEY}
    to: ${RECIPIENT_PUBKEY}
    amount: ${TRANSFER_AMOUNT}

ins:
  # Input: zkUSD UTXO owned by sender
  - utxo_id: ${ZKUSD_UTXO}
    charms:
      $TOKEN: ${INPUT_BALANCE}                # Total zkUSD in this UTXO

outs:
  # Output 1: zkUSD to recipient
  - address: ${RECIPIENT_ADDRESS}
    charms:
      $TOKEN: ${TRANSFER_AMOUNT}

  # Output 2: Change back to sender
  - address: ${SENDER_ADDRESS}
    charms:
      $TOKEN: ${CHANGE_AMOUNT}                # INPUT_BALANCE - TRANSFER_AMOUNT

# =============================================================================
# EXAMPLE: Transfer 500 zkUSD
# =============================================================================
# INPUT_BALANCE: 100000000000 (1,000 zkUSD in wallet)
# TRANSFER_AMOUNT: 50000000000 (500 zkUSD to send)
# CHANGE_AMOUNT: 50000000000 (500 zkUSD change)
#
# Validation:
#   - INPUT_BALANCE >= TRANSFER_AMOUNT
#   - CHANGE_AMOUNT = INPUT_BALANCE - TRANSFER_AMOUNT
#   - Sender must own the input UTXO (signature required)
# =============================================================================
