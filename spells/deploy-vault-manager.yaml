# zkUSD Vault Manager Deployment Spell
# Creates an NFT charm with the initial Vault Manager state
#
# VaultManager VK: 56ff2636c4d11caeed8a90a608e7c067928e5368f3166d495b85be90af659c44
# App ID: 3ce7c8f65b55f2e66f25370f951abfc49af6980d63969f9368f0b5bb1cf878d0
#
# Dependencies:
#   - Token VK: 7d1a06745a94adf1195fb9f2f987cb48b8c46b814f53167c619c9175cd406903
#   - StabilityPool VK: ace2894585f8820a3b230ab57a24df35de1dd4b7234d9d38bde78fa643871752
#   - Oracle VK: b44db07ac1697704ea7170f4e857c50c4545f0de00dfcc11835dc6efb0c27c32

version: 8

apps:
  # VaultManager as NFT: n/{app_id}/{vk}
  $00: n/3ce7c8f65b55f2e66f25370f951abfc49af6980d63969f9368f0b5bb1cf878d0/56ff2636c4d11caeed8a90a608e7c067928e5368f3166d495b85be90af659c44

# Witness data - Initialize operation
private_inputs:
  $00:
    # op code 0x00 = Initialize
    op: 0
    # Admin address (32 bytes)
    admin: [213, 79, 168, 49, 172, 25, 87, 76, 85, 3, 241, 203, 213, 5, 147, 74, 11, 171, 60, 238, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    # Token VK (32 bytes)
    zkusd_token_id: [125, 26, 6, 116, 90, 148, 173, 241, 25, 95, 185, 242, 249, 135, 203, 72, 184, 196, 107, 129, 79, 83, 22, 124, 97, 156, 145, 117, 205, 64, 105, 3]
    # StabilityPool VK (32 bytes)
    stability_pool_id: [172, 226, 137, 69, 133, 248, 130, 10, 59, 35, 10, 181, 122, 36, 223, 53, 222, 29, 212, 183, 35, 77, 157, 56, 189, 231, 143, 166, 67, 135, 23, 82]
    # Oracle VK (32 bytes)
    price_oracle_id: [180, 77, 176, 122, 193, 105, 119, 4, 234, 113, 112, 244, 232, 87, 197, 12, 69, 69, 240, 222, 0, 223, 204, 17, 131, 93, 198, 239, 176, 194, 124, 50]
    # Active Pool address (32 bytes)
    active_pool: [172, 79, 168, 49, 172, 25, 87, 76, 85, 3, 241, 203, 213, 5, 147, 74, 11, 171, 60, 238, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    # Default Pool address (32 bytes)
    default_pool: [222, 250, 168, 49, 172, 25, 87, 76, 85, 3, 241, 203, 213, 5, 147, 74, 11, 171, 60, 238, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

ins:
  # Input UTXO from split transaction
  - utxo_id: 7f0152ad9d97244f60e3fb680d35bd3268fa7634e5bf61055d4f28d6ad0e4420:4
    charms: {}

outs:
  # Output with VaultManager charm containing initial state
  - address: tb1qr25l2p34sv4wnz4q0cuh4g9jd9qh2eua6y5awq
    charms:
      $00:
        # VaultManagerState
        protocol:
          total_collateral: 0
          total_debt: 0
          active_vault_count: 0
          base_rate: 50
          last_fee_update_block: 0
          admin: [213, 79, 168, 49, 172, 25, 87, 76, 85, 3, 241, 203, 213, 5, 147, 74, 11, 171, 60, 238, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
          is_paused: false
        zkusd_token_id: [125, 26, 6, 116, 90, 148, 173, 241, 25, 95, 185, 242, 249, 135, 203, 72, 184, 196, 107, 129, 79, 83, 22, 124, 97, 156, 145, 117, 205, 64, 105, 3]
        stability_pool_id: [172, 226, 137, 69, 133, 248, 130, 10, 59, 35, 10, 181, 122, 36, 223, 53, 222, 29, 212, 183, 35, 77, 157, 56, 189, 231, 143, 166, 67, 135, 23, 82]
        price_oracle_id: [180, 77, 176, 122, 193, 105, 119, 4, 234, 113, 112, 244, 232, 87, 197, 12, 69, 69, 240, 222, 0, 223, 204, 17, 131, 93, 198, 239, 176, 194, 124, 50]
        active_pool: [172, 79, 168, 49, 172, 25, 87, 76, 85, 3, 241, 203, 213, 5, 147, 74, 11, 171, 60, 238, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        default_pool: [222, 250, 168, 49, 172, 25, 87, 76, 85, 3, 241, 203, 213, 5, 147, 74, 11, 171, 60, 238, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
