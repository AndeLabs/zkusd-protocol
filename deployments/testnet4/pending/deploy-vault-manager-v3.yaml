# ============================================================================
# zkUSD VaultManager V3 - Deployment Spell
# ============================================================================
# Deploys VaultManager with NEW Token V5 + Oracle V2 app_ids.
#
# VK: a2359b5a481117a9be19f8f3fa21e1d979bac5bfd16c94e0a46c2bc1326c837d
#
# V8 DEPLOYMENT - NEW CROSS-REFERENCES:
# - zkusd_token_id: Token V5 (4ab4dd6546...)
# - price_oracle_id: Oracle V2 (ee779405f8...)
# - stability_pool_id: StabilityPool V5 (b9412ca5d8...) [unchanged]
#
# CONTEXT:
# - Token V5 confirmed block 120191
# - Oracle V2 confirmed block 120191
# - VaultManager WASM unchanged (same VK as V2)
# ============================================================================
# Created: 2026-01-25
# Network: testnet4
# ============================================================================

version: 9

apps:
  # VaultManager State NFT - zeros for app_id (assigned on deployment)
  $00: n/0000000000000000000000000000000000000000000000000000000000000000/a2359b5a481117a9be19f8f3fa21e1d979bac5bfd16c94e0a46c2bc1326c837d

private_inputs:
  # Initialize operation (op=0)
  $00:
    op: 0
    # Admin address
    admin: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]
    # Token V5 app_id: 4ab4dd654607c8e06f7e1f166366cfcc783cdf80a92f2202d8836d937a6aba14
    zkusd_token_id: [74, 180, 221, 101, 70, 7, 200, 224, 111, 126, 31, 22, 99, 102, 207, 204, 120, 60, 223, 128, 169, 47, 34, 2, 216, 131, 109, 147, 122, 106, 186, 20]
    # StabilityPool V5 app_id (unchanged): b9412ca5d8ed6ca34d5b316ca51c960c8bc69aa96de467c9e4eb7bbfab24e320
    stability_pool_id: [185, 65, 44, 165, 216, 237, 108, 163, 77, 91, 49, 108, 165, 28, 150, 12, 139, 198, 154, 169, 109, 228, 103, 201, 228, 235, 123, 191, 171, 36, 227, 32]
    # Oracle V2 app_id: ee779405f88f890c68581e716b0dcad05762440941a6aa0248c722a1ede05943
    price_oracle_id: [238, 119, 148, 5, 248, 143, 137, 12, 104, 88, 30, 113, 107, 13, 202, 208, 87, 98, 68, 9, 65, 166, 170, 2, 72, 199, 34, 161, 237, 224, 89, 67]
    # Active pool address (same as admin)
    active_pool: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]
    # Default pool address (same as admin)
    default_pool: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]

public_inputs: {}

ins: []

outs:
  # Output 0: VaultManager State NFT (initialized)
  - address: tb1qr25l2p34sv4wnz4q0cuh4g9jd9qh2eua6y5awq
    charms:
      $00:
        protocol:
          total_collateral: 0
          total_debt: 0
          active_vault_count: 0
          base_rate: 50
          last_fee_update_block: 0
          admin: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]
          is_paused: false
        # Token V5 app_id
        zkusd_token_id: [74, 180, 221, 101, 70, 7, 200, 224, 111, 126, 31, 22, 99, 102, 207, 204, 120, 60, 223, 128, 169, 47, 34, 2, 216, 131, 109, 147, 122, 106, 186, 20]
        # StabilityPool V5 app_id (unchanged)
        stability_pool_id: [185, 65, 44, 165, 216, 237, 108, 163, 77, 91, 49, 108, 165, 28, 150, 12, 139, 198, 154, 169, 109, 228, 103, 201, 228, 235, 123, 191, 171, 36, 227, 32]
        # Oracle V2 app_id
        price_oracle_id: [238, 119, 148, 5, 248, 143, 137, 12, 104, 88, 30, 113, 107, 13, 202, 208, 87, 98, 68, 9, 65, 166, 170, 2, 72, 199, 34, 161, 237, 224, 89, 67]
        # Active pool
        active_pool: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]
        # Default pool
        default_pool: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]
