# ============================================================================
# zkUSD Price Oracle V2 - Deployment Spell
# ============================================================================
# Deploys fresh PriceOracle contract with current source code.
#
# VK: 372723f020b5030a53f2f40a5feb9c96c8f80fad19ed0a78b0591e363001175f
#
# ORACLE DESIGN:
# - Reference input pattern (not consumed when read)
# - Operator can update price
# - Admin can change operator
# - Stale price detection via block height
# ============================================================================
# Created: 2026-01-25
# Network: testnet4
# ============================================================================

version: 9

apps:
  # Oracle State NFT - zeros for app_id (assigned on deployment)
  $00: n/0000000000000000000000000000000000000000000000000000000000000000/372723f020b5030a53f2f40a5feb9c96c8f80fad19ed0a78b0591e363001175f

private_inputs:
  # Initialize operation (op=0)
  $00:
    op: 0
    # Admin address - same as Token admin
    admin: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]
    # Operator address - same as admin for now (can update later)
    operator: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]
    # Initial price: $100,000 with 8 decimals = 100_000_00000000 = 10000000000000
    price: 10000000000000

public_inputs: {}

ins: []

outs:
  # Output 0: Oracle State NFT
  - address: tb1qr25l2p34sv4wnz4q0cuh4g9jd9qh2eua6y5awq
    charms:
      $00:
        price:
          price: 10000000000000
          timestamp_block: 0
          source: Mock
          confidence: 100
        operator: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]
        admin: [15, 239, 114, 232, 40, 108, 13, 216, 213, 221, 86, 158, 147, 4, 51, 195, 34, 51, 13, 51, 134, 80, 173, 193, 170, 10, 69, 2, 211, 90, 23, 72]
        is_active: true
        last_valid_price: 10000000000000
